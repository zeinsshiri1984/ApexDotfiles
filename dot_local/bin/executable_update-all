#!/bin/bash
set -e

# å®šä¹‰é¢œè‰²
GREEN='\033[0;32m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

echo -e "${BLUE}ğŸš€ [1/5] æ›´æ–° Chezmoi é…ç½®æº...${NC}"
# æ‹‰å–æœ€æ–° dotfiles å¹¶åº”ç”¨
chezmoi update --apply

echo -e "${BLUE}ğŸº [2/5] æ›´æ–° Homebrew...${NC}"
brew update
brew upgrade
brew cleanup

echo -e "${BLUE}ğŸ“¦ [3/5] æ›´æ–° Devbox å…¨å±€åŒ…...${NC}"
if command -v devbox &> /dev/null; then
    devbox global update
fi

echo -e "${BLUE}ğŸš [4/5] æ›´æ–° Zsh æ’ä»¶ (Sheldon)...${NC}"
if command -v sheldon &> /dev/null; then
    sheldon lock --update
fi

echo -e "${BLUE}ğŸ³ [5/5] æ¸…ç† Podman/Docker åƒåœ¾...${NC}"
if command -v podman &> /dev/null; then
    podman system prune -f
elif command -v docker &> /dev/null; then
    docker system prune -f
fi

echo -e "${GREEN}âœ… æ‰€æœ‰ç³»ç»Ÿç»„ä»¶å·²æ›´æ–°å®Œæ¯•ï¼${NC}"