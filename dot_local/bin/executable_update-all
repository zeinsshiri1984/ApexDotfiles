#!/bin/bash
set -e

# å®šä¹‰é¢œè‰²
GREEN='\033[0;32m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

echo -e "${BLUE}ğŸš€ [1/3] æ›´æ–° Chezmoi é…ç½®æº...${NC}"
chezmoi update --apply

echo -e "${BLUE}ğŸ“¦ [2/3] æ›´æ–° Devbox å…¨å±€åŒ…...${NC}"
if command -v devbox &> /dev/null && devbox global list >/dev/null 2>&1; then
    devbox global update
    devbox global pull
fi

echo -e "${BLUE}ğŸš [3/3] æ›´æ–° Zsh æ’ä»¶ (Mise)...${NC}"
if command -v mise &> /dev/null; then
    mise upgrade
    mise prune -y
fi

echo -e "${GREEN}âœ… åŸºç¡€æ›´æ–°å®Œæˆï¼(ä¸å†è‡ªåŠ¨æ‰§è¡Œæ·±åº¦æ¸…ç†)${NC}"
echo -e "   -> è‹¥éœ€æ¸…ç† Docker/Podmanï¼Œè¯·è¿è¡Œ: just clean-docker"
echo -e "   -> è‹¥éœ€æ¸…ç†ç³»ç»Ÿåƒåœ¾ï¼Œè¯·è¿è¡Œ: just clean-system"

